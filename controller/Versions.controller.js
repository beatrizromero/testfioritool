sap.ui.define(["Coty/RawMaterial/Router","Coty/RawMaterial/util/Commons","Coty/RawMaterial/util/Constants","Coty/RawMaterial/util/Services"],function(e,t,s,i){"use strict";return e.extend("Coty.RawMaterial.controller.Versions",{onInit:function(){this.getRouter().getRoute(s.VERSIONS_VIEW).attachMatched(this.onMatchedRoute,this)},onMatchedRoute:function(){let e=this.getView().getModel(s.DATAMODEL).getProperty("/MaterialSelected/RAWMATERIAL_NUMBER");this.callServiceGetMaterials(e)},callServiceGetMaterials:function(e){sap.ui.core.BusyIndicator.show(0);i.getVersions(e).then(e=>{sap.ui.core.BusyIndicator.hide();e.results=e.results.sort((e,t)=>e.RN-t.RN);this.getView().getModel(s.DATAMODEL).setProperty("/Versions",e.results)}).catch(e=>{sap.ui.core.BusyIndicator.hide();this.showErrorMessage(e)})},onPressVersion:function(e){let t=this.getView().getModel(s.DATAMODEL);let i=e.getSource().getBindingContext(s.DATAMODEL).getPath();t.setProperty("/MaterialSelected",t.getProperty(i));this.navBack();sap.ui.getCore().getEventBus().publish(s.DETAIL_VIEW,"localNavigation",{})},showErrorMessage:function(e){t.showMessage(this,sap.ui.core.ValueState.Error,sap.ui.core.ValueState.Error,t.errorSimpleMessage(this,e))},onBtnPressNavBack:function(){this.navBack()}})});